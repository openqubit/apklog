{"version":3,"sources":["meteor://ðŸ’»app/index.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["//************************************************************************************************Start Of Globals\nMarkers = new Mongo.Collection('markers');\nFriends = new Meteor.Collection('friends');\nMembers = new Meteor.Collection('members');\nRequests = new Meteor.Collection('requests');\nNotifications = new Meteor.Collection('notifications');\nKontacts = new Meteor.Collection('kontacts');\n\n if(Meteor.isClient){\n \nMeteor.startup(function(){\n  Kontacts.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n    \n});\n\n\n}\n\n//************************************************************************************************End Of Globals\n\n//************************************************************************************************Start Of Cordova Back Button\n if(Meteor.isCordova){\n /**\n document.addEventListener(\"deviceready\", onDeviceReady, false);\n\nfunction onDeviceReady(){\n    document.addEventListener(\"backbutton\", function(e){\n       if($.mobile.activePage.is('.bv')){\n           e.preventDefault();\n           navigator.app.exitApp();\n       }\n       else {\n           navigator.app.backHistory()\n       }\n    }, false);\n}\n*/\n\ndocument.addEventListener(\"backbutton\", onBackKeyDown, false);\n\nfunction onBackKeyDown(e) {\n   e.preventDefault();\n   console.log('back button triggered');\n}\n\nMeteor.startup(function () {  \ndocument.addEventListener('deviceready', function () {\n    // Android customization\n    cordova.plugins.backgroundMode.setDefaults({ text:'Doing heavy tasks.'});\n    // Enable background mode\n    cordova.plugins.backgroundMode.enable();\n    // Called when background mode has been activated\n    cordova.plugins.backgroundMode.onactivate = function () {\n      var mynumber = Session.get('telephoneNumber');\n      var kount = Notifications.find({eventownernumber:mynumber}).count();\n        //var allnotices = Notifications.findOne({eventownernumber:mynumber}).noticemessage;\n        console.log(kount);\n        var wn = Math.floor(Math.random() * 200);\n        Session.set(\"mynum\", kount);\n        //var uo = Notifications.findOne({eventownernumber:mynumber},{sort: {noticedate: -1}});\n        //console.log(\"second test\",uo.noticemessage);\n       // var allnotices = uo.noticemessage;\n       if(kount == 0){\n       console.log('there is no notification to display');\n       }\n       else{\n        var uo = Notifications.findOne({eventownernumber:mynumber},{sort: {noticedate: -1}});\n        console.log(\"second test\",uo.noticemessage);\n       var allnotices = uo.noticemessage;\n      cordova.plugins.notification.local.add({id:wn, title:'New Notification Alert', message:allnotices});\n       }\n        //alert('kount changed');\n        /**\n        this.sessionWatcher = Session.watch('mynum', function(value) {\n         });\n         */\n    }\n}, false);\n});\n}\n//************************************************************************************************End of cordova back button\n\n\n//**************************************************************************Start Of collections\n  \nif (Meteor.isClient){\n  \nNotifications.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n    \nMeteor.subscribe('notifications');\n\n}\n//**************************************************************************End Of collections\n\n\n//**************************************************************************Start Of collections\nif (Meteor.isServer) {\n\nMeteor.publish('members', function() {\n    return Members.find();\n});\n\nMeteor.publish('kontacts', function() {\n    return Kontacts.find();\n});\n\nMeteor.publish('markers', function() {\n    return Markers.find();\n});\n\nMeteor.publish('notifications', function() {\n    return Notifications.find();\n});\n\nMembers.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n    \nNotifications.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n    \n}\n//**************************************************************************End Of collections\n\n\n//**************************************************************************Start Of methods\nMeteor.methods({\n  'updatenumber': function(tn,names,cl){\n  Members.update({telephoneNumber: tn},{$set: {\"names\": names,\"currentLocation\":cl}},{upsert: true});\n  },\n  'join_upsert':function(join_upsert_selector,theowner,theid){\n    console.log(join_upsert_selector);\n  \tMarkers.update({eventoriginalid:theid},{ $set: join_upsert_selector},{upsert: true});\n  },\n  'edit_notification_upsert':function(edit_upsert_selector,niq){\n  \tNotifications.update({eventuniqueid:niq},{ $set: edit_upsert_selector},{upsert: true});\n  },\n  'notification_upsert':function(notifications_upsert_selector,markerid){\n    console.log(notifications_upsert_selector);\n  \tNotifications.update({eventoriginalid:markerid},{ $set: notifications_upsert_selector},{upsert: true});\n  },\n   'leave_event':function(theid,thenumber){\n    console.log(theid);\n    console.log(thenumber);\n    //Meteor.call('leave_event',theid,thenumber);\n     //Markers.remove({\"eventoriginalid\":theid},{\"eventjoinernumber\":thenumber});\n       //remove method\n       Markers.remove({eventoriginalid:theid},{eventjoinernumber:thenumber},{eventtype:'copy'});\n  },\n   'leave_event_upsert':function(theid){\n    console.log(notifications_upsert_selector);\n  \tNotifications.update({eventoriginalid:markerid},{ $set: notifications_upsert_selector},{upsert: true});\n  }\n});\n\n//**************************************************************************End of methods\n\n\n\n//**************************************************************************Client side templates code\nif (Meteor.isClient){\n\nTemplate.search.onRendered(function() {\n $( \".sr\" ).click(function() {\n  Session.set('thetitle', null);\n});\n});\n\n\tTemplate.note.helpers({\n  invites: function() {\n  var eventop = Session.get('telephoneNumber');\n    return Notifications.find({eventownernumber:eventop});\n  }\n});\nTemplate.search.helpers({\t\n searchresults: function() {\n  var thename = Session.get('thename');\n  var thelocation = Session.get('thelocation');;\n  var thetitle = Session.get('thetitle');;\n  \n  var search = new RegExp(thetitle, 'i');\n  return Markers.find({eventtitle:{$regex: search}});\n  }\n});\n\n Template.search.events({\n    \n    'submit': function (event, template) {\n     event.preventDefault();\n     var thename = event.target.thename.value;\n     var thelocation = event.target.thelocation.value;\n     var thetitle = event.target.thetitle.value;\n     Session.set('thename',thename);\n     Session.set('thelocation',thelocation);\n     Session.set('thetitle',thetitle);\n    }\n    \n  });\n  \n\n  Template.note.events({\n    \n    'click .notify': function (event, template) {\n     event.preventDefault();\n     var latLng = Geolocation.latLng();\n     \n     var thecoords = JSON.parse(localStorage.getItem('jc'));\n     var unparsed = localStorage.getItem('jc');\n      var str = toString(thecoords);\n     console.log(thecoords);\n     console.log(unparsed);\n     var mylat = parseFloat(thecoords.lat);\n     var mylng = parseFloat(thecoords.lng);\n     \n     console.log(mylat);\n     console.log(mylng);\n \n     var tlat = '{\"lat\":'+mylat;\n     var tlng = '\"lng\":'+mylng+'}';\n     var tkomma = ',';\n     \n     var tlit = tlat + tkomma + tlng;\n     \n     \n     var center = new google.maps.LatLng(mylat,mylng);\n\n     console.log(tlit);\n    \n  \n     //var icon = '';\n     var icon = 'https://maps.google.com/mapfiles/kml/pushpin/grn-pushpin.png';    \n     \n         var myApp = new Framework7();\n \n     var $$ = Dom7;\n \n     var popupHTML = '<div class=\"popup login-screen\">'+\n                    '<div class=\"content-block\">'+\n                      'hello world'+\n                      '<p><a href=\"#\" class=\"close-popup\">Close me</a></p>'+\n                    '</div>'+\n                  '</div>';\n     myApp.popup(popupHTML);\n    map.panTo(center);\n    //marker.setIcon(icon);\n    //window.location.href = link;\n    }\n    \n  });\n  \n  Template.ikon.onRendered(function() {\n  Session.get('telephoneNumber');\n  });\n\n\n    Template.ikon.events({ \n    'click #gotoposition': function (event, template) {\n     event.preventDefault();\n     Meteor.subscribe('notifications');\n     var tell = Session.get('telephoneNumber');\n     var tellx = \"'\"+tell+\"'\";\n     //var allnotices = Notifications.findOne({\"eventownernumber\":tell}).noticemessage;\n     //var allnotices = Notifications.findOne({eventownernumber:\"2\"}).noticemessage;\n     //var allnotices = Notifications.find({eventownernumber:\"2\"}).fetch()[0].noticemessage;\n     \n     var ex = Notifications.find({eventownernumber:tell}).fetch().reverse().map(function(c){\n                //return {value: c.noticemessage};\n                return c.noticemessage;\n            });\n           \n      console.log(\"first test\",ex);\n      var uo = Notifications.findOne({eventownernumber:tell},{sort: {noticedate: -1}});\n      console.log(\"second test\",uo.noticemessage);\n      //var latinum = Notifications.findOne({eventownernumber:tell}, {fields: {'noticemessage': 1}});\n     //var allnotices = 'testing';\n     console.log('checkout stuff');\n     //console.log('Telephone Number'+tellx);\n     \n         \n     var latLng = Geolocation.latLng();\n     \n     //var map = google.maps.Map(document.getElementById(\"map\"));\n\n     var center = new google.maps.LatLng(latLng.lat, latLng.lng);\n     \n     var icon = '';\n     //var icon = 'https://maps.google.com/mapfiles/kml/pushpin/pink-pushpin.png';\n                          \n    map.panTo(center);\n    }\n    \n  });\n    Template.ikon.helpers({\n    thecount: function() {\n    var mynumber = Session.get('telephoneNumber');\n    return Markers.find({ $or: [ { publicevent: \"yes\" }, { primaryowner:mynumber},{invited:mynumber} ] } ).count();\n      }\n  \t});\n    \nMeteor.subscribe('members');\nMeteor.subscribe('notifications');\nMeteor.subscribe('kontacts');\n\n Kontacts.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n    \nNotifications.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n    \nMembers.allow({\n\n    insert: function (document) {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    }\n    });\n}\n\n//*************************************************************************End of client side code\n\n//**************************************************************************Start Of members\n  \nif (Meteor.isServer) {\nMembersSchema = new SimpleSchema({\n  telephoneNumber: {\n    type: String,\n    label: 'Telephone Number',\n    max: 100\n  },\n  names: {\n    type: String,\n    label: 'Names',\n    max: 100\n  },\n  currentLocation: {\n    type: String,\n    label: 'Current Location',\n    max: 100\n  }\n});\nMembers.attachSchema(MembersSchema);\n}\n\n//**************************************************************************End of members\n\n//**************************************************************************Start Of collections\n//Notifications\nif (Meteor.isClient) { \nNoticeSchema = new SimpleSchema({\n  lat: {\n    type: String,\n    label: 'Latitude',\n    max: 100\n  },\n  lng: {\n    type: String,\n    label: 'Longitude',\n    max: 100\n  },\n   eventuniqueid: {\n    type: String,\n    label: 'Event Unique Id',\n    max: 100\n  },\n  eventownernumber: {\n    type: String,\n    label: 'Event Owner Number',\n    max: 100\n  },\n  eventownernames: {\n    type: String,\n    label: 'Event Owner Names',\n    max: 100\n  },\n   eventtitle: {\n    type: String,\n    label: 'Event Title',\n    max: 100\n  },\n  eventtime: {\n    type: String,\n    label: 'Event Time',\n    max: 100\n  },\n    invited: {\n    type: String,\n    label: 'Invited',\n    max: 100\n  },\n    eventduration: {\n    type: String,\n    label: 'Event Duration',\n    max: 100\n  },\n    eventtype: {\n    type: String,\n    label: 'Event Type',\n    max: 100\n  },\n  eventcategory: {\n    type: String,\n    label: 'Event Category',\n    max: 100\n  },\n   eventstatus: {\n    type: String,\n    label: 'Event Status',\n    max: 100\n  },\n   createdAt: {\n    type: String,\n    label: 'Created At',\n    max: 100\n  },\n   noticenumber: {\n    type: String,\n    label: 'Notification Number',\n    max: 100\n  },\n   noticenames: {\n    type: String,\n    label: 'Notification Names',\n    max: 100\n  },\n   noticemessage: {\n    type: String,\n    label: 'Notification Message',\n    max: 100\n  },\n  //{11:read},{12:unread}\n   noticestatus: {\n    type: String,\n    label: 'Notification Status',\n    max: 100\n  },\n  noticedate: {\n    type: String,\n    label: 'Notifice Date',\n    max: 100\n  }\n\n});\nNotifications.attachSchema(NoticeSchema);\n//Markers\nEventsSchema = new SimpleSchema({\n   lat: {\n    type: String,\n    label: 'Latitude',\n    max: 100\n  },\n  lng: {\n    type: String,\n    label: 'Longitude',\n    max: 100\n  },\n   eventuniqueid: {\n    type: String,\n    label: 'Event Unique Id',\n    max: 100\n  },\n  eventownernumber: {\n    type: String,\n    label: 'Event Owner Number',\n    max: 100\n  },\n  eventownernames: {\n    type: String,\n    label: 'Event Owner Names',\n    max: 100\n  },\n   eventtitle: {\n    type: String,\n    label: 'Event Title',\n    max: 100\n  },\n    eventtime: {\n    type: String,\n    label: 'Event Time',\n    max: 100\n  },\n    invited: {\n    type: String,\n    label: 'Invited',\n    max: 100\n  },\n    eventduration: {\n    type: String,\n    label: 'Event Duration',\n    max: 100\n  },\n  //{public,private,{copy:join or leave}}\n   eventtype: {\n    type: String,\n    label: 'Event Type',\n    max: 100\n  },\n  eventcategory: {\n    type: String,\n    label: 'Event Category',\n    max: 100\n  },\n  //{11:active},{12:expired},{13:marked as deleted}\n   eventstatus: {\n    type: String,\n    label: 'Event Status',\n    max: 100\n  },\n   eventoriginalid: {\n    type: String,\n    label: 'Event Original Id',\n    max: 100\n  },\n   eventjoinernumber: {\n    type: String,\n    label: 'Event Joiner Number',\n    max: 100\n  },\n   eventjoinernames: {\n    type: String,\n    label: 'Event Joiner Names',\n    max: 100\n  },\n   eventjoindate: {\n    type: String,\n    label: 'Event Join Date',\n    max: 100\n  },\n   eventleavedate: {\n    type: String,\n    label: 'Event Joiner Number',\n    max: 100\n  },\n   createdAt: {\n    type: Date,\n    label: 'Created At',\n    max: 100\n  }\n\n});\nMarkers.attachSchema(EventsSchema);\n}\n\n//**************************************************************************End Of collections\n\n\n//**************************************************************************Start Of cordova notifications\n    if(Meteor.isCordova){\n    \n    Meteor.startup(function () {\n    cordova.plugins.notification.local.registerPermission(function (granted) {\n    \t/**\n      if(confirm(\"Geo Canada would like to send you notifications: \") === true) {\n        //alert('permission granted '+granted)\n      } else {\n        //alert('permission denied')\n      }\n      */\n    });\n        \n  });\n \n    }\n//**************************************************************************End of cordova notifications\n\n\n//**************************************************************************Start Of startup\nMeteor.startup(function(){\nif(Meteor.isServer) {\n//Markers._ensureIndex({createdAt: 1}, {expireAfterSeconds: 60});\n    if (Friends.find().count() === 0) {\n  Friends.insert({userid:0,friendid:0});\n  }\n  if (Requests.find().count() === 0) {\n  Requests.insert({userid:0,friendid:0});\n  }\n}\n});\n\n//************************************************************** End of startup\n\n\n//**************************************************************************Start of client\n\nif (Meteor.isClient) {\nMeteor.subscribe('kontacts');\n  Meteor.startup(function(){\n  \t\n    console.log('hello');\n    GoogleMaps.load({\n    key: 'AIzaSyD81kt-LoD3_Vqyqhd1yw9YlHq8J3SHpEg'\n    });\n  });  \n   \n Template.telephone.events({\n \n    'submit form': function (event, template) {\n    event.preventDefault();\n    var tn = $('#telephoneNumber').val();\n    var names = $('#names').val();\n    //call upsert function\n    var selector = {\n        telephoneNumber: tn\n    };\n    var this_exists = Members.find(selector, {limit: 1}).count() > 0;\n    \n      \tvar latLng = Geolocation.latLng();\n  \t     \n        var lat2 = latLng.lat;\n        var lng2 = latLng.lng;\n        var cl = lat2+','+lng2;\n        \n    if(this_exists == true) {\n       Meteor.call( 'updatenumber', tn,names,cl);\n       Session.clearPersistent();\n       Session.setPersistent({telephoneNumber: tn});\n       Session.setPersistent({names: names});\n       Session.setPersistent({currentLocation: cl});\n    } else {\n       Meteor.call( 'updatenumber', tn,names,cl);\n       Session.clearPersistent();\n       Session.setPersistent({telephoneNumber: tn});\n       Session.setPersistent({names: names});\n       Session.setPersistent({currentLocation: cl});\n    }\n    },\n    'change #eventowner' : function(event){\n        alert($(event.target).val()+\" Changed\");\n      }\n  });\n  Template.telephone.helpers({\n  \ttn: function() {\n        return Session.get('telephoneNumber');\n    },\n    names: function() {\n        return Session.get('names');\n    },\n    thecount: function() {\n    \tvar mynumber = Session.get('telephoneNumber');\n    return Markers.find({ $or: [ { publicevent: \"yes\" }, { primaryowner:mynumber},{invited:mynumber} ] } ).count();\n  }\n  \t});\n    \n   Template.map.events({\n   'click button.invite': function(event, template){\n         event.preventDefault();\n     alert('this connected');\n   }\n  });\n  \n  Template.map.onCreated(function() {\n  var latLng = Geolocation.latLng();\n  var mynumber = Session.get('telephoneNumber');\n    \n    Tracker.autorun(function(){\n     if(Meteor.isCordova){\n        var kount = Notifications.find({eventownernumber:mynumber}).count();\n        //var allnotices = Notifications.findOne({eventownernumber:mynumber}).noticemessage;\n        console.log(kount);\n        var wn = Math.floor(Math.random() * 200);\n        Session.set(\"mynum\", kount);\n        //var uo = Notifications.findOne({eventownernumber:mynumber},{sort: {noticedate: -1}});\n        //console.log(\"second test\",uo.noticemessage);\n       // var allnotices = uo.noticemessage;\n       if(kount == 0){\n       console.log('there is no notification to display');\n       }\n       else{\n        var uo = Notifications.findOne({eventownernumber:mynumber},{sort: {noticedate: -1}});\n        console.log(\"second test\",uo.noticemessage);\n       var allnotices = uo.noticemessage;\n      cordova.plugins.notification.local.add({id:wn, title:'New Notification Alert', message:allnotices});\n       }\n        //alert('kount changed');\n        /**\n        this.sessionWatcher = Session.watch('mynum', function(value) {\n         });\n         */\n     }\n    }),\n \n    \n    GoogleMaps.ready('map', function(map) {\n    window.map = map.instance;\n    \n    //**********************************************************************Start add marker\n    google.maps.event.addListener(map.instance, 'click', function(event) {\n   \t    if(Meteor.isCordova){\n        localStorage.removeItem('entry');\n        MyObject = {\n       ae: function(clicked_id) {\n       var items = JSON.parse(localStorage.getItem('entry'));\n       if (items == null || typeof items !== 'object') {\n      items = [];\n        }\n      var entry = {\n      'num': clicked_id\n      };\n     items.push(entry);\n     localStorage.setItem('entry', JSON.stringify(items));\n     //alert(localStorage.getItem('entry'));\n\n       }\n         };\n\n        //list friends with the app installed\n        \n        var currentnumber = Session.get('telephoneNumber');  \n                  var sel = {\n                 my_number:currentnumber\n                  };\n              \n                var my_friends = Kontacts.find(sel).fetch();\n                //console.log(my_friends);\n                for (i in my_friends)\n                {\n\n                  var f_number = my_friends[i].contact_number;\n                  var f_names = my_friends[i].contact_names;\n                  var fand = {\n                  telephoneNumber: f_number\n              };     \n            var nord = Members.find(fand, {limit: 1}).count() > 0;\n       \n              if(nord == true) {\n                     alert('true');\n        //$('.table tbody').append('<tr class=\"child\"><td>'+f_names+'</td><td><button id=\"'+f_number+'\" onClick=\"MyObject.ae(this.id);\" type=\"button\" class=\"invite btn btn-primary\">Invite</button></td></tr>');\n                    } if(nord == false) {\n                    \tconsole.log('false');\n                      }\n                      \n                }\n                \n        //end of list friend with the app installed\n   }\n        var myApp = new Framework7();\n        \n        var $$ = Dom7;\n        \n        \n          var phtml = \n         '<div class=\"cp popup\">'+\n         '<div class=\"row\">'+\n         '<div class=\"col-100\">'+\n    '<div class=\"buttons-row\">'+\n              '<a  href=\"#tab1\" class=\"button active tab-link\">Create Event</a>'+\n              '<a  href=\"#tab2\" class=\"button tab-link\">Invite Friends</a>'+\n            '</div>'+\n       '<div class=\"tabs\">'+\n       '<div class=\"tab active\" id=\"tab1\">'+\n       '<fieldset class=\"ml form-inline\">'+\n        '<label class=\"control-label\">Event Title</label><br/>'+\n       '<input type=\"text\" class=\"form-control input-medium\" id=\"eventtitle\" value=\"\" required/><br/>'+\n       '<label class=\"control-label\">Event Time</label><br/>'+\n        '<input type=\"time\" class=\"form-control input-medium\" id=\"eventtime\" value=\"\" /><br/>'+\n       '<label class=\"control-label\">Event Duration In Minutes</label><br/>'+\n       '<input type=\"number\"  class=\"form-control input-medium\" id=\"eventduration\" value=\"\"  /><br/>'+\n       '<label class=\"control-label\">Event Category</label><br/>'+\n        '<select class=\"form-control input-medium\" id=\"eventcategory\" name=\"category\">'+\n            '<option value=\"hackathon\">Hackathon</option>'+\n              '<option value=\"birthday\">Birthday</option>'+\n              '<option value=\"barmitzvah\">Bar Mitzvah</option>'+\n            '</select><br/>'+\n            '<label class=\"control-label\">Event Type</label><br/>'+\n            '<select class=\"form-control input-medium\" id=\"eventtype\">'+\n            '<option value=\"private\">Private</option>'+\n              '<option value=\"public\">Public</option>'+\n            '</select><br/>'+\n            '<button class=\"pull-left kancel btn btn-success close-popup\">Close</button>'+\n            '<button class=\"pull-right ce btn btn-success close-popup\">Create Event</button>'+\n            '</fieldset>'+\n            '</div>'+\n            '<div class=\"tab\" id=\"tab2\"><table class=\"table ml table-striped\">'+\n    '<thead>'+\n        '<tr>'+\n            '<th>Names</th>'+\n            '<th>Action</th>'+\n        '</tr>'+\n    '</thead>'+\n    '<tbody>'+\n    '</tbody>'+\n'</table></div>'+\n            '</div>'+\n            '</div>'+\n             '</div>'+\n            '</div>';\n         $$('.popup').remove(phtml);\n         myApp.popup(phtml);\n         //$('.custompopup').append(phtml);\n          //$('.popup').height(300);\n          $$( \".kancel\" ).click(function() {\n          console.log('cancel');\n          var et =$('#eventtitle').val();\n        var evd =$('#eventduration').val();\n        var ec = $('#eventcategory').val();\n        var etype = $('#eventtype').val();\n        var etime = $('#eventtime').val();\n        var invited = localStorage.getItem('entry');\n        var lat = event.latLng.lat();\n        var lng = event.latLng.lng();\n        var currentnumber = Session.get('telephoneNumber');\n        var currentnames = Session.get('names');\n        \n           Markers.insert({\n        \tlat:lat,\n        \tlng:lng,\n        \teventuniqueid:Random.id(),\n        \teventownernumber:currentnumber,\n        \teventownernames:currentnames,\n        \teventtitle:'dismissed',\n        \teventtime:'00:00',\n        \tinvited:'0',\n        \teventduration:'60',\n        \teventtype:'public',\n        \teventcategory:'dismissed',\n        \t//{11:active},{12:expired},{13:marked as deleted}\n        \teventstatus:'11',\n        \teventoriginalid:'0',\n        \teventjoinernumber:'0',\n        \teventjoinernames:'0',\n        \teventjoindate:'0',\n        \teventleavedate:'0',\n        \tcreatedAt:new Date()\n        \t});\n          });\n          \n          $$( \".ce\" ).click(function() {\n \t     \n        var et =$('#eventtitle').val();\n        var evd =$('#eventduration').val();\n        var ec = $('#eventcategory').val();\n        var etype = $('#eventtype').val();\n        var etime = $('#eventtime').val();\n        var invited = localStorage.getItem('entry');\n        var lat = event.latLng.lat();\n        var lng = event.latLng.lng();\n        var currentnumber = Session.get('telephoneNumber');\n        var currentnames = Session.get('names');\n        var ri = Random.id();\n            \n          Markers.insert({\n        \tlat:lat,\n        \tlng:lng,\n        \teventuniqueid:ri,\n        \teventownernumber:currentnumber,\n        \teventownernames:currentnames,\n        \teventtitle:et,\n        \teventtime:etime,\n        \tinvited:'0',\n        \teventduration:evd,\n        \teventtype:etype,\n        \teventcategory:ec,\n        \t//{11:active},{12:expired},{13:marked as deleted}\n        \teventstatus:'11',\n        \teventoriginalid:'0',\n        \teventjoinernumber:'0',\n        \teventjoinernames:'0',\n        \teventjoindate:'0',\n        \teventleavedate:'0',\n        \tcreatedAt:new Date()\n        \t});\n        \t\n        var inv = JSON.parse(invited);\n       \n        var myArray = inv;\n        for (var i = 0, length = myArray.length; i < length; i++) {\n        var o = myArray[i];\n        for (var p in o) {\n        console.log(o[p]);\n        \n        Markers.insert({\n        \tlat:lat,\n        \tlng:lng,\n        \teventuniqueid:ri,\n        \teventownernumber:currentnumber,\n        \teventownernames:currentnames,\n        \teventtitle:et,\n        \teventtime:etime,\n        \tinvited:o[p],\n        \teventduration:evd,\n        \teventtype:etype,\n        \teventcategory:ec,\n        \t//{11:active},{12:expired},{13:marked as deleted}\n        \teventstatus:'11',\n        \teventoriginalid:'0',\n        \teventjoinernumber:'0',\n        \teventjoinernames:'0',\n        \teventjoindate:'0',\n        \teventleavedate:'0',\n        \tcreatedAt:new Date()\n        \t});\n        \t\n    }\n    }\n        \n         myApp.closeModal('.cp');\n          });\n  \n      });\n       //*********************************************************************End add marker\n//db.markers.find( { $or: [ { publicevent: \"yes\" }, { primaryowner:\"0720069005\" },{invited:\"0720069005\"} ] } )\n\n\n //**********************************************************************Start list markers\n \n  var markers = {};\n  \n \n  var mynumber = Session.get('telephoneNumber');\n  // Markers.find({ $or: [ { publicevent: \"yes\" },{joinstatus:\"14\"}, { primaryowner:mynumber },{invited:mynumber} ] } ).observe({\n  \t//Markers.find({ $or: [ {joinstatus:\"14\"},{ primaryowner:mynumber }] } ).observe({\n      Markers.find({\n      \t$or: [\n      {eventtype:'private',eventownernumber:mynumber,eventstatus:'11'},\n      {eventtype:'public',eventownernumber:mynumber,eventstatus:'11'},\n      {eventtype:'public',eventownernumber:{$ne:mynumber},eventstatus:'11'},\n      {invited:mynumber,eventstatus:'11'}\n    ]}).observe({\n    \t//**********************************************************************Start list markers\n        added: function (document) {\n               var icon;\n               var drg;\n               var infoWindow;\n               var marker;\n         /**   \n            {\n    \"_id\": \"J6f8aPzd4DESzK2Hr\",\n    \"eventoriginalid\": \"795ke9b6irkJFHAku\",\n    \"lat\": \"-1.2637544065804518\",\n    \"lng\": \"36.895437240600586\",\n    \"eventuniqueid\": \"eQCGWtrHPCi9cNwYC\",\n    \"eventownernumber\": \"2\",\n    \"eventownernames\": \"Stuff two\",\n    \"eventtitle\": \"First public\",\n    \"eventtime\": \"17:49\",\n    \"invited\": \"0\",\n    \"eventduration\": \"30\",\n    \"eventtype\": \"copy\",\n    \"eventcategory\": \"hackathon\",\n    \"eventstatus\": \"11\",\n    \"eventjoinernumber\": \"1\",\n    \"eventjoinernames\": \"Test 1\",\n    \"eventjoindate\": {\n        \"$date\": \"2016-11-24T20:40:11.386Z\"\n    },\n    \"createdAt\": {\n        \"$date\": \"2016-11-10T14:49:19.288Z\"\n    }\n}\n   */         \n               \n         /**\n          * Test Joining\n          */\n                \n                var joinstatus = {\n              eventjoinernumber: mynumber,\n              eventstatus:'11',\n              eventoriginalid:document._id,\n              eventtype:'copy'\n                          };\n    var join_exists = Markers.find(joinstatus, {limit: 1}).count() > 0;\n       \n    if(join_exists == true) {\n    \tvar icon = 'https://maps.google.com/mapfiles/kml/pushpin/pink-pushpin.png';\n         console.log(\" Title \"+document.eventtitle+\" Number \"+mynumber+\" Id \"+document._id+\" Join Exists \"+join_exists);\n                 \n               if(document.eventownernumber == mynumber){\n                var drg = true;\n              }\n              else{\n                var drg = false;\n              }\n              \n          var marker = new google.maps.Marker({\n            draggable: drg,\n            animation: google.maps.Animation.DROP,\n            position: new google.maps.LatLng(document.lat, document.lng),\n            map: map.instance,\n            icon:icon,\n            id: document._id\n          });\n\t}\n\tif(join_exists == false){\n\t\tvar icon = 'https://maps.google.com/mapfiles/kml/pushpin/blue-pushpin.png';\n         console.log(\" Title \"+document.eventtitle+\" Number \"+mynumber+\" Id \"+document._id+\" Join Exists \"+join_exists);\n                 \n               if(document.eventownernumber == mynumber){\n                var drg = true;\n              }\n              else{\n                var drg = false;\n              }\n              \n          var marker = new google.maps.Marker({\n            draggable: drg,\n            animation: google.maps.Animation.DROP,\n            position: new google.maps.LatLng(document.lat, document.lng),\n            map: map.instance,\n            icon:icon,\n            id: document._id\n          });\n\t}\n    \n               \n         //start of drag event\n          google.maps.event.addListener(marker, 'dragend', function(event) {\n            \n            Markers.update(marker.id,{ $set: {\n        \tlat:event.latLng.lat(),\n        \tlng:event.latLng.lng(),\n        \teventuniqueid:document.eventuniqueid,\n        \teventownernumber:document.eventownernumber,\n        \teventownernames:document.eventownernames,\n        \teventtitle:document.eventtitle,\n        \teventtime:document.eventtime,\n        \tinvited:document.invited,\n        \teventduration:document.eventduration,\n        \teventtype:document.eventtype,\n        \teventcategory:document.eventcategory,\n        \t//{11:active},{12:expired},{13:marked as deleted}\n        \teventstatus:document.eventstatus,\n        \teventoriginalid:document.eventoriginalid,\n        \teventjoinernumber:document.eventjoinernumber,\n        \teventjoinernames:document.eventjoinernames,\n        \teventjoindate:document.eventjoindate,\n        \teventleavedate:document.eventleavedate,\n        \tcreatedAt:new Date()\n    \t    }});\n        \t\n          });\n          //end of drag event\n          var mid = document._id;\n          var eventtitle = document.eventtitle;\n          var eventtime = document.eventtime;\n          var eventduration = document.eventduration;\n          var eventtype = document.eventtype;\n          var eventcategory = document.eventcategory;\n          var js = document.joinstatus;\n          var op = document.eventownernumber;\n          var theowner = Session.get('telephoneNumber');\n          var theowner_names = Session.get('names');\n          \n          \n          \n           MyObject = {  \t\n           joinevent:function(clicked_id){\n           console.log(clicked_id);\n           \n           var theid = clicked_id;\n           var theownernumber = Session.get('telephoneNumber');\n           var theowner = Session.get('telephoneNumber');\n           var theownernames = Session.get('names');\n           var markerid = Session.get('markerid');\n           var eowner = Session.get('myeventownernumber');\n           \n           var join_upsert_selector = {\n           lat:Session.get('mylat'),\n           lng:Session.get('mylng'),\n           eventuniqueid:Session.get('myeventuniqueid'),\n           eventownernumber:Session.get('myeventownernumber'),\n           eventownernames:Session.get('myeventownernames'),\n           eventtitle:Session.get('myeventtitle'),\n           eventtime:Session.get('myeventtime'),\n           invited:Session.get('myinvited'),\n           eventduration:Session.get('myeventduration'),\n           eventtype:'copy',\n           eventicon: 'https://maps.google.com/mapfiles/kml/pushpin/pink-pushpin.png',\n           eventoriginalid:markerid,\n           eventcategory:Session.get('myeventcategory'),\n           eventstatus:Session.get('myeventstatus'),\n           eventjoinernumber:Session.get('myeventjoinernumber'),\n           eventjoinernames:Session.get('names'),\n           eventjoindate:new Date(),\n           eventleavedate:Session.get('myeventleavedate'),\n           createdAt:Session.get('mycreatedAt')\n               };\n          var xeventtitle = Session.get('myeventtitle'); \n          var notifications_upsert_selector = {\n           lat:Session.get('mylat'),\n           lng:Session.get('mylng'),\n           eventuniqueid:Session.get('myeventuniqueid'),\n           eventownernumber:Session.get('myeventownernumber'),\n           eventownernames:Session.get('myeventownernames'),\n           eventtitle:Session.get('myeventtitle'),\n           eventtime:Session.get('myeventtime'),\n           invited:Session.get('myinvited'),\n           eventoriginalid:markerid,\n           eventduration:Session.get('myeventduration'),\n           eventtype:'notification',\n           eventcategory:Session.get('myeventcategory'),\n           eventstatus:Session.get('myeventstatus'),\n           createdAt:Session.get('mycreatedAt'),\n           noticedate:new Date(),\n           noticenumber:theownernumber,\n           noticenames:theownernames,\n           noticemessage:theownernames+' has joined your event '+xeventtitle,\n           noticestatus:'12'\n               };\n               \n           \n           Meteor.call('join_upsert',join_upsert_selector,theowner,theid);\n           Meteor.call('notification_upsert',notifications_upsert_selector,markerid);\n           $('.leave').show();\n        var icon = 'https://maps.google.com/mapfiles/kml/pushpin/pink-pushpin.png';\n        markers[theid].setIcon(icon);       \n        },\n        leaveevent:function(clicked_id){\n        var theid = clicked_id;\n        var thenumber = Session.get('telephoneNumber');\n        console.log(\"try march ddp\",document._id);\n        console.log(\"try match\",theid);\n       // Markers.remove({_id:theid,eventtype:'copy'});\n        //alert('DDP Leave button toggle setup');\n        //Meteor.call('leave_event',theid,thenumber);\n        Meteor.call('leave_event',theid,thenumber, function(error) {\n        if (error) {\n        console.log(error.reason);\n        } else {\n        console.log('left event successfully');\n        $('.join').show();\n        }\n        });\n\n        var icon = 'https://maps.google.com/mapfiles/kml/pushpin/blue-pushpin.png';\n        markers[clicked_id].setIcon(icon);\n        },\n        imevent:function(clicked_id){\n        var theid = clicked_id;\n        var myApp = new Framework7();\n        var $$ = Dom7;\n        \n       myApp.prompt('Enter your message', 'Send Message To Event Owner', \n      function (value) {\n        myApp.alert('Your message was sent successfully!','Geo Canada');\n      },\n      function (value) {\n        myApp.alert('You have canceled sending message.','Geo Canada');\n       }\n       );   \n        },\n        editevent:function(clicked_id,niq){\n        var theid = clicked_id;\n        console.log('from inside edit event', clicked_id);\n        //alert(niq);\n        $('.popup').remove();\n        var myApp = new Framework7();\n        var $$ = Dom7;\n        //myApp.closeModal('.popup');\n       var EditApp = new Framework7();\n       var edit_eventtitle = Markers.findOne({_id:theid}).eventtitle;\n       var edit_eventtime = Markers.findOne({_id:theid}).eventtime;\n       var edit_eventduration = Markers.findOne({_id:theid}).eventduration;\n       var edit_eventcategory = Markers.findOne({_id:theid}).eventcategory;\n       var edit_eventtype = Markers.findOne({_id:theid}).eventtype;\n            if(edit_eventcategory == 'hackathon'){\n           var das_optionen ='<option value=\"hackathon\" selected>Hackathon</option><option value=\"birthday\">Birthday</option><option value=\"barmitzvah\">Bar Mitzvah</option>';\n            }\n            if(edit_eventcategory === 'birthday'){\n           var das_optionen ='<option value=\"hackathon\">Hackathon</option><option value=\"birthday\" selected>Birthday</option><option value=\"barmitzvah\">Bar Mitzvah</option>';\n            }\n            if(edit_eventcategory === 'barmitzvah'){\n           var das_optionen ='<option value=\"hackathon\">Hackathon</option><option value=\"birthday\">Birthday</option><option value=\"barmitzvah\" selected>Bar Mitzvah</option>';\n            }\n            if(edit_eventtype === 'private'){\n           var du_hast ='<option value=\"private\" selected>Private</option><option value=\"public\">Public</option>';\n            }\n            if(edit_eventtype == 'public'){\n           var du_hast ='<option value=\"private\">Private</option><option value=\"public\" selected>Public</option>';\n            }\n          var ehtml = \n         '<div class=\"popup\">'+\n         '<div class=\"row\">'+\n         '<div class=\"col-100\">'+\n    '<div class=\"buttons-row\">'+\n              '<a  href=\"#tab1\" class=\"button active tab-link\">Update Event</a>'+\n              '<a  href=\"#tab2\" class=\"button tab-link\">Update Invite List</a>'+\n            '</div>'+\n       '<div class=\"tabs\">'+\n       '<div class=\"tab active\" id=\"tab1\">'+\n       '<fieldset class=\"ml form-inline\">'+\n        '<label class=\"control-label\">Event Title</label><br/>'+\n       '<input type=\"text\" class=\"form-control input-medium\" id=\"eventtitle\" value=\"'+edit_eventtitle+'\" required/><br/>'+\n       '<label class=\"control-label\">Event Time</label><br/>'+\n        '<input type=\"time\" class=\"form-control input-medium\" id=\"eventtime\" value=\"'+edit_eventtime+'\" /><br/>'+\n       '<label class=\"control-label\">Event Duration In Minutes</label><br/>'+\n       '<input type=\"number\"  class=\"form-control input-medium\" id=\"eventduration\" value=\"'+edit_eventduration+'\"  /><br/>'+\n       '<label class=\"control-label\">Event Category</label><br/>'+\n        '<select class=\"form-control input-medium\" id=\"eventcategory\" name=\"category\">'+\n           das_optionen+\n            '</select><br/>'+\n            '<label class=\"control-label\">Event Type</label><br/>'+\n            '<select class=\"form-control input-medium\" id=\"eventtype\">'+\n            du_hast+\n            '</select><br/>'+\n            '<button class=\"pull-left kancel btn btn-danger close-popup\">Close</button>'+\n            '<button class=\"pull-right ce btn btn-success close-popup\">Update Event</button>'+\n            '</fieldset>'+\n            '</div>'+\n            '<div class=\"tab\" id=\"tab2\"><table class=\"table ml table-striped\">'+\n    '<thead>'+\n        '<tr>'+\n            '<th>Names</th>'+\n            '<th>Action</th>'+\n        '</tr>'+\n    '</thead>'+\n    '<tbody>'+\n    '</tbody>'+\n'</table></div>'+\n            '</div>'+\n            '</div>'+\n             '</div>'+\n            '</div>';\n         EditApp.popup(ehtml);  \n          \n         //impose contacts\n       \n   \n       var editeventtitle = $('#eventtitle').val();\n       var editeventtime = $('#eventtime').val();\n       var editeventduration = $('#eventduration').val();\n       var editeventcategory = $('#eventcategory').val();\n       var editeventtype = $('#eventtype').val();\n       var editlat = Markers.findOne({_id:theid}).lat;\n       var editlng = Markers.findOne({_id:theid}).lng;\n       var editeventuniqueid = Markers.findOne({_id:theid}).eventuniqueid;\n       var editeventownernumber = Markers.findOne({_id:theid}).eventownernumber;\n       var editeventownernames = Markers.findOne({_id:theid}).eventownernames;\n       var editinvited = Markers.findOne({_id:theid}).invited;\n       var editeventoriginalid = Markers.findOne({_id:theid}).eventoriginalid;\n       var editeventstatus = Markers.findOne({_id:theid}).eventstatus;\n       var editeventjoinernumber = Markers.findOne({_id:theid}).eventjoinernumber;\n       var editeventjoinernames = Markers.findOne({_id:theid}).eventjoinernames;\n       var editeventjoindate = Markers.findOne({_id:theid}).eventjoindate;\n       var editeventleavedate = Markers.findOne({_id:theid}).eventleavedate;\n       var editcreatedAt = Markers.findOne({_id:theid}).createdAt;\n       \n        var edit_upsert_selector = {\n           lat:editlat,\n           lng:editlng,\n           eventuniqueid:editeventuniqueid,\n           eventownernumber:editeventownernumber,\n           eventownernames:editeventownernames,\n           eventtitle:editeventtitle,\n           eventtime:editeventtime,\n           invited:editinvited,\n           eventduration:editeventduration,\n           eventtype:'notification',\n           eventoriginalid:editeventoriginalid,\n           eventcategory:editeventcategory,\n           eventstatus:editeventstatus,\n           eventjoinernumber:editeventjoinernumber,\n           eventjoinernames:editeventjoinernames,\n           eventjoindate:editeventjoindate,\n           eventleavedate:editeventleavedate,\n           createdAt:editcreatedAt\n               };\n             var niq = editeventuniqueid;   \n          Meteor.call('edit_notification_upsert',edit_upsert_selector,niq);\n               \n        }\n        };\n        \n\n   \n            //***************************************************Start of Marker event**********************************************\n            google.maps.event.addListener(marker, 'click', function () {\n            \tif(Meteor.isServer){\n            \t\tMeteor.publish('kontacts', function() {\n                             return Kontacts.find();\n                         });\n            \t}\n                 \n\n                console.log(\"Current clicked marker id\",document._id, \" Title\", document.eventtitle);\n                var tnumber = Session.get('telephoneNumber');\n                delete Session.keys['markerid'];\n                delete Session.keys['mylat'];\n                delete Session.keys['mylng'];\n                delete Session.keys['myeventuniqueid'];\n                delete Session.keys['myeventownernumber'];\n                delete Session.keys['myeventownernames'];\n                delete Session.keys['myeventtitle'];\n                delete Session.keys['myeventtime'];\n                delete Session.keys['myinvited'];\n                delete Session.keys['myeventduration'];\n                delete Session.keys['myeventtype'];\n                delete Session.keys['myeventcategory'];\n                delete Session.keys['myeventstatus'];\n                delete Session.keys['myeventjoinernumber'];\n                delete Session.keys['myeventjoinernames'];\n                delete Session.keys['mycreatedAt'];\n                Session.set('markerid',document._id);\n                Session.set('mylat',document.lat);\n                Session.set('mylng', document.lng);\n                Session.set('myeventuniqueid', document.eventuniqueid);\n                Session.set('myeventownernumber', document.eventownernumber);\n                Session.set('myeventownernames', document.eventownernames);\n                Session.set('myeventtitle', document.eventtitle);\n                Session.set('myeventtime', document.eventtime);\n                Session.set('myinvited', document.invited);\n                Session.set('myeventduration', document.eventduration);\n                Session.set('myeventtype', document.eventtype);\n                Session.set('myeventcategory', document.eventcategory);\n                Session.set('myeventstatus', document.eventstatus);\n                Session.set('myeventjoinernumber', tnumber);\n                Session.set('myeventjoinernames', document.eventjoinernames);\n                Session.set('mycreatedAt', document.createdAt);\n                \n              //****************************************************Start of info window code on marker click\n        \n                    var joinstatus = {\n              eventjoinernumber: theowner,\n              eventstatus:'11',\n              eventoriginalid:document._id,\n              eventtype:'copy'\n                          };\n    var j_exists = Markers.find(joinstatus, {limit: 1}).count() > 0;\n    console.log('join status',j_exists);\n    \n       var eventtitle = Session.get('myeventtitle');\n       var eventtime = Session.get('myeventtime');\n       var eventduration = Session.get('myeventduration');\n       var eventcategory = Session.get('myeventcategory');\n       \n       \n       if( j_exists == true){\n            var kontent = '<button onClick=\"MyObject.leaveevent(this.id);\" id='+mid+' class=\"mr leave btn btn-danger pull-right\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i> Leave</button><button onClick=\"MyObject.joinevent(this.id);\" id='+mid+' class=\"mr join btn btn-primary pull-right\"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i> Join</button><br/><hr/><span class=\"gb\">Event Title</span> '+eventtitle+' <br/><span class=\"gb\">Event Time</span> '+eventtime+'<br/><span class=\"gb\">Event Duration</span> '+eventduration+'<br/><span class=\"gb\">Event Category</span> '+eventcategory+'';\n\n       }\n       if(j_exists == false){\n            var kontent = '<button onClick=\"MyObject.leaveevent(this.id);\" id='+mid+' class=\"mr leave btn btn-danger pull-right\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i> Leave</button><button onClick=\"MyObject.joinevent(this.id);\" id='+mid+' class=\"mr join btn btn-primary pull-right\"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i> Join</button><br/><hr/><span class=\"gb\">Event Title</span> '+eventtitle+' <br/><span class=\"gb\">Event Time</span> '+eventtime+'<br/><span class=\"gb\">Event Duration</span> '+eventduration+'<br/><span class=\"gb\">Event Category</span> '+eventcategory+'';\n\n       }          \n       if(op == theowner){\n        var mid = document._id;\n        var niq = document.eventuniqueid;\n        var session_marker_id = Session.get('markerid');\n\n       \t var kontent = '<button onClick=\"MyObject.editevent(this.id,this.name);\" data-del='+mid+' name='+niq+' class=\"mr edit btn btn-danger pull-right\"><i class=\"fa fa-remove\" aria-hidden=\"true\"></i> Delete</button> <button onClick=\"MyObject.editevent(this.id,this.name);\" id='+mid+' name='+niq+' class=\"mr edit btn btn-success pull-right\"><i class=\"fa fa-edit\" aria-hidden=\"true\"></i> Edit</button><br/><hr/><span class=\"gb\">Event Title</span> '+eventtitle+' <br/><span class=\"gb\">Event Time</span> '+eventtime+'<br/><span class=\"gb\">Event Duration</span> '+eventduration+'<br/><span class=\"gb\">Event Category</span> '+eventcategory+'';    \t\n       }\n                \n        var infoWindow = new google.maps.InfoWindow({   \n           content: kontent\n            });\n            \n    Tracker.autorun(function(){\n    var theownerr = Session.get('telephoneNumber');\n    var joinstatus = {\n              eventjoinernumber: theownerr,\n              eventstatus:'11',\n              eventoriginalid:document._id,\n              eventtype:'copy'\n                          };\n    var jj_exists = Markers.find(joinstatus, {limit: 1}).count() > 0;\n    var tmid = document._id;\n    console.log('join status reactive',jj_exists);\n    \n    if(jj_exists == true){\n    //alert('true');\n    $('.join').hide();\n    $('.leave').show();\n    //$('#'+tmid).removeClass(\"join\").addClass(\"leave\");\n    }\n     if(jj_exists == false){\n    //alert('true');\n    $('.leave').hide();\n    $('.join').show();\n    //$('#'+tmid).removeClass(\"leave\").addClass(\"join\");\n    }\n    });\n            \n        //****************************************************End of info window code on marker click\n                \n                   var theApp = new Framework7();\n \n     var $$ = Dom7;\n                \n                var mid = document._id;\n        var niq = document.eventuniqueid;\n        var session_marker_id = Session.get('markerid');\n\n                \n     /**\n     var popupHTML = '<div class=\"popup login-screen\">'+\n                    '<div class=\"content-block\">'+\n                      ''+kontent+''+\n                      '<p><a href=\"#\" class=\"close-popup\">Close me</a></p>'+\n                    '</div>'+\n                  '</div>';\n                  */\n     var popupHTML = '<div class=\"popup login-screen\">'+\n                    '<div class=\"content-block\">'+\n                      ''+kontent+''+\n                      '<p><a href=\"#\" class=\"close-popup\">Close me</a></p>'+\n                    '</div>'+\n                  '</div>';\n     //bootbox.alert(popupHTML);\n    $$('.cp').remove();\n    $$('.popup').remove(popupHTML);\n    theApp.popup(popupHTML);\n     //$('<div><div/>').html(popupHTML).dialog();\n    //vex.dialog.alert({ unsafeMessage:popupHTML});\n    \n    \n\n      Tracker.autorun(function(){\n    var theownerr = Session.get('telephoneNumber');\n    var joinstatus = {\n              eventjoinernumber: theownerr,\n              eventstatus:'11',\n              eventoriginalid:document._id,\n              eventtype:'copy'\n                          };\n    var jj_exists = Markers.find(joinstatus, {limit: 1}).count() > 0;\n    var tmid = document._id;\n          \n    \n          \n    console.log('join status reactive',jj_exists);\n    \n    if(jj_exists == true){\n        \n    //alert('true');\n    $('.join').hide();\n    $('.leave').show();\n    //$('#'+tmid).removeClass(\"join\").addClass(\"leave\");\n    }\n     if(jj_exists == false){\n         \n    //alert('true');\n    $('.leave').hide();\n    $('.join').show();\n    //$('#'+tmid).removeClass(\"leave\").addClass(\"join\");\n    }\n    });\n            });\n            \n            //***************************************************End of Marker event**********************************************\n           \n          markers[document._id] = marker;\n           \n        },\n        //**********************************************************************End list markers\n        changed: function (newDocument, oldDocument) {\n          markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });\n        },\n        removed: function (oldDocument) {\n          markers[oldDocument._id].setMap(null);\n          google.maps.event.clearInstanceListeners(markers[oldDocument._id]);\n          delete markers[oldDocument._id];\n        }\n      });\n    });\n  });\n\nTemplate.map.onRendered(function() {\n\n  if(Meteor.isCordova){\n         navigator.contactsPhoneNumbers.list(function(contacts) {\n      console.log(contacts.length + ' contacts found');\n      for(var i = 0; i < contacts.length; i++) {\n         for(var j = 0; j < contacts[i].phoneNumbers.length; j++) {\n             \n            var phone = contacts[i].phoneNumbers[j];          \n            var currentnumber = Session.get('telephoneNumber');\n            var currentnames = Session.get('names');\n               \n            var selector = {\n           my_number:currentnumber,\n           my_names: currentnames,\n           contact_names:contacts[i].displayName,\n           contact_number:phone.number\n              };     \n            var this_exists = Kontacts.find(selector, {limit: 1}).count() > 0;\n       \n              if(this_exists == true) {\n              console.log('Caught Duplicate');\n                    } else {\n            Kontacts.insert({\n           my_number:currentnumber,\n           my_names: currentnames,\n           contact_names:contacts[i].displayName,\n           contact_number:phone.number,\n           created:new Date()\n           });\n                      }\n                      \n         }\n     }\n\n          });\n      \n   }\n        GoogleMaps.ready('map', function(map) {\n    var latLng = Geolocation.latLng();\n          var latt = latLng.lat;\n          var lngg = latLng.lng;\n\n    var marker = new google.maps.Marker({\n      position: new google.maps.LatLng(latt,lngg),\n      map: map.instance,\n      icon:'https://maps.google.com/mapfiles/kml/shapes/ranger_station.png',\n      center: new google.maps.LatLng(latt,lngg),\n      zoom: 16\n    });\n  });  \n});\n\n\n  Template.map.helpers({\n    mapOptions: function() {\n      if (GoogleMaps.loaded()) {\n          var latLng = Geolocation.latLng();\n          var latt = latLng.lat;\n          var lngg = latLng.lng;\n        return {\n          center: new google.maps.LatLng(latt,lngg),\n          zoom: 16,\n          icon:'https://maps.google.com/mapfiles/kml/shapes/ranger_station.png',\n          zoomControl: true,\n          zoomControlOptions: {\n        position: google.maps.ControlPosition.TOP_RIGHT\n        }\n        };\n      }\n    }\n  });\n}\n\n//**************************************************************************End of client"]}